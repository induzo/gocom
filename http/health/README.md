<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# health

```go
import "github.com/induzo/gocom/http/health"
```

HTTP handler that retrieves health status of the application

## Index

- [Constants](<#constants>)
- [type CheckConfig](<#CheckConfig>)
- [type CheckError](<#CheckError>)
  - [func \(e \*CheckError\) Error\(\) string](<#CheckError.Error>)
- [type Health](<#Health>)
  - [func NewHealth\(opts ...Option\) \*Health](<#NewHealth>)
  - [func \(h \*Health\) Handler\(\) http.Handler](<#Health.Handler>)
  - [func \(h \*Health\) RegisterCheck\(conf CheckConfig\)](<#Health.RegisterCheck>)
- [type Option](<#Option>)
  - [func WithChecks\(checkConf ...CheckConfig\) Option](<#WithChecks>)
- [type Response](<#Response>)
- [type TimeoutError](<#TimeoutError>)
  - [func \(e \*TimeoutError\) Error\(\) string](<#TimeoutError.Error>)


## Constants

<a name="DefaultTimeout"></a>

```go
const (
    DefaultTimeout = 3 * time.Second
)
```

<a name="HealthEndpoint"></a>

```go
const (
    HealthEndpoint = "/sys/health" // URL used by infra team
)
```

<a name="CheckConfig"></a>
## type [CheckConfig](<https://github.com/induzo/gocom/blob/main/http/health/health.go#L46-L50>)

CheckConfig are the parameters used to run each check.

```go
type CheckConfig struct {
    Name    string
    CheckFn func(ctx context.Context) error
    Timeout time.Duration
}
```

<a name="CheckError"></a>
## type [CheckError](<https://github.com/induzo/gocom/blob/main/http/health/health.go#L36-L39>)

CheckError is an error returned when the health check function returns an error.

```go
type CheckError struct {
    // contains filtered or unexported fields
}
```

<a name="CheckError.Error"></a>
### func \(\*CheckError\) [Error](<https://github.com/induzo/gocom/blob/main/http/health/health.go#L41>)

```go
func (e *CheckError) Error() string
```



<a name="Health"></a>
## type [Health](<https://github.com/induzo/gocom/blob/main/http/health/health.go#L59-L61>)

Health provides http.Handler that retrieves the health status of the application based on the provided checks.

```go
type Health struct {
    // contains filtered or unexported fields
}
```

<details><summary>Example</summary>
<p>

Using Health HTTP handler

```go
package main

import (
	"context"
	"net/http"
	"time"

	"github.com/induzo/gocom/http/health"
)

func main() {
	checks := []health.CheckConfig{
		{
			Name:    "lambda",
			Timeout: 1 * time.Second, // Optional to specify timeout
			CheckFn: func(_ context.Context) error {
				return nil
			},
		},
	}

	mux := http.NewServeMux()

	h := health.NewHealth(health.WithChecks(checks...))

	mux.Handle(health.HealthEndpoint, h.Handler())
}
```

</p>
</details>

<a name="NewHealth"></a>
### func [NewHealth](<https://github.com/induzo/gocom/blob/main/http/health/health.go#L67>)

```go
func NewHealth(opts ...Option) *Health
```

NewHealth returns a new Health with the provided options.

<a name="Health.Handler"></a>
### func \(\*Health\) [Handler](<https://github.com/induzo/gocom/blob/main/http/health/health.go#L99>)

```go
func (h *Health) Handler() http.Handler
```

Handler returns a http.Handler that retrieves the health status of the application based on the provided check functions.

<a name="Health.RegisterCheck"></a>
### func \(\*Health\) [RegisterCheck](<https://github.com/induzo/gocom/blob/main/http/health/health.go#L89>)

```go
func (h *Health) RegisterCheck(conf CheckConfig)
```

RegisterCheck registers a check to be run as part of the health check.

<a name="Option"></a>
## type [Option](<https://github.com/induzo/gocom/blob/main/http/health/health.go#L64>)

Option is the options type to configure Health.

```go
type Option func(*Health)
```

<a name="WithChecks"></a>
### func [WithChecks](<https://github.com/induzo/gocom/blob/main/http/health/health.go#L80>)

```go
func WithChecks(checkConf ...CheckConfig) Option
```

WithChecks adds the checks to be run as part of the health check.

<a name="Response"></a>
## type [Response](<https://github.com/induzo/gocom/blob/main/http/health/health.go#L53-L56>)

Response is the health check handler response.

```go
type Response struct {
    Error        string `json:"error,omitempty"`
    ErrorMessage string `json:"error_message,omitempty"`
}
```

<a name="TimeoutError"></a>
## type [TimeoutError](<https://github.com/induzo/gocom/blob/main/http/health/health.go#L26-L29>)

TimeoutError is an error returned when the health check function exceeds the timeout duration.

```go
type TimeoutError struct {
    // contains filtered or unexported fields
}
```

<a name="TimeoutError.Error"></a>
### func \(\*TimeoutError\) [Error](<https://github.com/induzo/gocom/blob/main/http/health/health.go#L31>)

```go
func (e *TimeoutError) Error() string
```



Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
