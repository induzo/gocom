<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# health

```go
import "github.com/induzo/gocom/http/health"
```

HTTP handler that retrieves health status of the application

## Index

- [Constants](<#constants>)
- [type CheckConfig](<#type-checkconfig>)
- [type CheckError](<#type-checkerror>)
  - [func (e *CheckError) Error() string](<#func-checkerror-error>)
- [type Health](<#type-health>)
  - [func NewHealth(opts ...Option) *Health](<#func-newhealth>)
  - [func (h *Health) Handler() http.Handler](<#func-health-handler>)
  - [func (h *Health) RegisterCheck(conf CheckConfig)](<#func-health-registercheck>)
- [type Option](<#type-option>)
  - [func WithChecks(checkConf ...CheckConfig) Option](<#func-withchecks>)
- [type Response](<#type-response>)
- [type TimeoutError](<#type-timeouterror>)
  - [func (e *TimeoutError) Error() string](<#func-timeouterror-error>)


## Constants

```go
const (
    DefaultTimeout = 3 * time.Second
)
```

```go
const (
    HealthEndpoint = "/sys/health" // URL used by infra team
)
```

## type CheckConfig

CheckConfig are the parameters used to run each check.

```go
type CheckConfig struct {
    Name    string
    CheckFn func(ctx context.Context) error
    Timeout time.Duration
}
```

## type CheckError

CheckError is an error returned when the health check function returns an error.

```go
type CheckError struct {
    // contains filtered or unexported fields
}
```

### func \(\*CheckError\) Error

```go
func (e *CheckError) Error() string
```

## type Health

Health provides http.Handler that retrieves the health status of the application based on the provided checks.

```go
type Health struct {
    // contains filtered or unexported fields
}
```

<details><summary>Example</summary>
<p>

Using Health HTTP handler

```go
package main

import (
	"context"
	"net/http"
	"time"

	"github.com/induzo/gocom/http/health"
)

func main() {
	checks := []health.CheckConfig{
		{
			Name:    "lambda",
			Timeout: 1 * time.Second, // Optional to specify timeout
			CheckFn: func(ctx context.Context) error {
				return nil
			},
		},
	}

	mux := http.NewServeMux()

	h := health.NewHealth(health.WithChecks(checks...))

	mux.Handle(health.HealthEndpoint, h.Handler())
}
```

</p>
</details>

### func NewHealth

```go
func NewHealth(opts ...Option) *Health
```

NewHealth returns a new Health with the provided options.

### func \(\*Health\) Handler

```go
func (h *Health) Handler() http.Handler
```

Handler returns a http.Handler that retrieves the health status of the application based on the provided check functions.

### func \(\*Health\) RegisterCheck

```go
func (h *Health) RegisterCheck(conf CheckConfig)
```

RegisterCheck registers a check to be run as part of the health check.

## type Option

Option is the options type to configure Health.

```go
type Option func(*Health)
```

### func WithChecks

```go
func WithChecks(checkConf ...CheckConfig) Option
```

WithChecks adds the checks to be run as part of the health check.

## type Response

Response is the health check handler response.

```go
type Response struct {
    Error        string `json:"error,omitempty"`
    ErrorMessage string `json:"error_message,omitempty"`
}
```

## type TimeoutError

TimeoutError is an error returned when the health check function exceeds the timeout duration.

```go
type TimeoutError struct {
    // contains filtered or unexported fields
}
```

### func \(\*TimeoutError\) Error

```go
func (e *TimeoutError) Error() string
```



Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
