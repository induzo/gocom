<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# writablecontext

```go
import "github.com/induzo/gocom/http/middleware/writablecontext"
```

## Index

- [func Middleware(next http.Handler) http.Handler](<#func-middleware>)
- [type Key](<#type-key>)
- [type Store](<#type-store>)
  - [func FromContext(ctx context.Context) Store](<#func-fromcontext>)
  - [func (s Store) Get(key string) (any, bool)](<#func-store-get>)
  - [func (s Store) Set(key string, value any)](<#func-store-set>)


## func Middleware

```go
func Middleware(next http.Handler) http.Handler
```

Middleware is a middleware that adds a writable context to the request.

<details><summary>Example</summary>
<p>

Using Middleware

```go
package main

import (
	"fmt"
	"net/http"
	"net/http/httptest"

	"github.com/induzo/gocom/http/middleware/writablecontext"
)

func main() {
	middlewareSetInStore := func(next http.Handler) http.Handler {
		return http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
			store := writablecontext.FromContext(r.Context())
			store.Set("foo", "bar")
			next.ServeHTTP(w, r)
		})
	}

	// Create a handler to use for testing
	handler := func(w http.ResponseWriter, r *http.Request) {
		store := writablecontext.FromContext(r.Context())
		if store == nil {
			return
		}

		val, ok := store.Get("foo")
		if !ok {
			return
		}

		valS, ok := val.(string)
		if !ok {
			return
		}

		w.Write([]byte(valS))
	}

	mux := http.NewServeMux()

	mux.Handle("/", writablecontext.Middleware(middlewareSetInStore(http.HandlerFunc(handler))))

	rr := httptest.NewRecorder()

	// Serve the handler
	mux.ServeHTTP(rr, httptest.NewRequest(http.MethodGet, "/", nil))

	fmt.Println(rr.Body.String())

}
```

#### Output

```
bar
```

</p>
</details>

## type Key

Key is the type for the context key.

```go
type Key string
```

## type Store

Store is a map of key/value pairs for the context.

```go
type Store map[string]any
```

### func FromContext

```go
func FromContext(ctx context.Context) Store
```

FromContext returns the writable context from the request.

### func \(Store\) Get

```go
func (s Store) Get(key string) (any, bool)
```

Get returns the value for a key in the context.

### func \(Store\) Set

```go
func (s Store) Set(key string, value any)
```

Set sets the value for a key in the context.



Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
